{"ast":null,"code":"import _classCallCheck from \"/Users/hussam/SFDS project/Hussam-moviesdb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/hussam/SFDS project/Hussam-moviesdb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/hussam/SFDS project/Hussam-moviesdb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/hussam/SFDS project/Hussam-moviesdb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/hussam/SFDS project/Hussam-moviesdb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/hussam/SFDS project/Hussam-moviesdb/src/components/movies.jsx\";\nimport React, { Component } from \"react\";\nimport Pagination from \"./pagination\";\nimport Movie from \"./movie\";\nimport { getPopular } from \"../services/moviesService\";\nimport { beginTheBar, endTheBar } from \"../services/loadingBarService\";\nimport queryString from \"query-string\";\n\nvar Movies = /*#__PURE__*/function (_Component) {\n  _inherits(Movies, _Component);\n\n  function Movies() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Movies);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Movies)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      movies: [],\n      rawData: [],\n      currentPage: 1\n    };\n\n    _this.getHeaderQuery = function () {\n      return queryString.parse(_this.props.location.search);\n    };\n\n    _this.pushToHistory = function (page) {\n      _this.props.history.push(\"/movies?&page=\".concat(page));\n    };\n\n    _this.handlePageChange = function (page) {\n      beginTheBar();\n\n      _this.setState({\n        currentPage: page\n      }, function () {\n        getPopular(_this.state.currentPage).then(function (movies) {\n          _this.setState({\n            movies: movies.results,\n            rawData: movies\n          }, function () {\n            endTheBar();\n\n            _this.pushToHistory(_this.state.currentPage);\n          });\n        });\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Movies, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      beginTheBar();\n      var page = this.getHeaderQuery().page || this.state.currentPage;\n      this.props.history.push(\"/movies?&page=\".concat(page));\n\n      if (page !== this.state.currentPage) {\n        this.setState({\n          currentPage: page\n        });\n      }\n\n      getPopular(this.state.currentPage).then(function (movies) {\n        _this2.setState({\n          movies: movies.results,\n          rawData: movies\n        }, function () {\n          endTheBar();\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var movies = this.state.movies;\n      var _this$state$rawData = this.state.rawData,\n          totalPages = _this$state$rawData.total_pages,\n          currentPage = _this$state$rawData.page;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        className: \"movies-main-header display-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 9\n        }\n      }, \"Popular\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"float-right\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(\"ul\", {\n        className: \"row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 9\n        }\n      }, movies.map(function (m) {\n        return /*#__PURE__*/React.createElement(Movie, {\n          key: m.id,\n          movie: m,\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 13\n          }\n        });\n      })), /*#__PURE__*/React.createElement(Pagination, {\n        pageCount: totalPages || 1,\n        currentPage: currentPage,\n        onPageChange: this.handlePageChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 9\n        }\n      }));\n    }\n  }]);\n\n  return Movies;\n}(Component);\n\nexport default Movies;","map":{"version":3,"sources":["/Users/hussam/SFDS project/Hussam-moviesdb/src/components/movies.jsx"],"names":["React","Component","Pagination","Movie","getPopular","beginTheBar","endTheBar","queryString","Movies","state","movies","rawData","currentPage","getHeaderQuery","parse","props","location","search","pushToHistory","page","history","push","handlePageChange","setState","then","results","totalPages","total_pages","map","m","id"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Pagination from \"./pagination\";\nimport Movie from \"./movie\";\nimport { getPopular } from \"../services/moviesService\";\nimport { beginTheBar, endTheBar } from \"../services/loadingBarService\";\nimport queryString from \"query-string\";\n\nclass Movies extends Component {\n  state = {\n    movies: [],\n    rawData: [],\n    currentPage: 1\n  };\n\n  getHeaderQuery = () => queryString.parse(this.props.location.search);\n\n  componentDidMount() {\n    beginTheBar();\n    let page = this.getHeaderQuery().page || this.state.currentPage;\n    this.props.history.push(`/movies?&page=${page}`);\n\n    if (page !== this.state.currentPage) {\n      this.setState({ currentPage: page });\n    }\n    getPopular(this.state.currentPage).then(movies => {\n      this.setState({ movies: movies.results, rawData: movies }, () => {\n        endTheBar();\n      });\n    });\n  }\n\n  pushToHistory = page => {\n    this.props.history.push(`/movies?&page=${page}`);\n  };\n\n  handlePageChange = page => {\n    beginTheBar();\n    this.setState({ currentPage: page }, () => {\n      getPopular(this.state.currentPage).then(movies => {\n        this.setState({ movies: movies.results, rawData: movies }, () => {\n          endTheBar();\n          this.pushToHistory(this.state.currentPage);\n        });\n      });\n    });\n  };\n\n  render() {\n    const { movies } = this.state;\n    const { total_pages: totalPages, page: currentPage } = this.state.rawData;\n    return (\n      <div>\n        <h1 className=\"movies-main-header display-4\">Popular</h1>\n        <div className=\"float-right\"></div>\n\n        <br />\n        <br />\n        <br />\n        <ul className=\"row\">\n          {movies.map(m => (\n            <Movie key={m.id} movie={m} />\n          ))}\n        </ul>\n        <Pagination\n          pageCount={totalPages || 1}\n          currentPage={currentPage}\n          onPageChange={this.handlePageChange}\n        />\n      </div>\n    );\n  }\n}\n\nexport default Movies;\n"]},"metadata":{},"sourceType":"module"}