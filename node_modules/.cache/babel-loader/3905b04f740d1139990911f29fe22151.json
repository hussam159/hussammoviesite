{"ast":null,"code":"import _classCallCheck from \"/Users/hussam/SFDS project/Hussam-moviesdb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/hussam/SFDS project/Hussam-moviesdb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/hussam/SFDS project/Hussam-moviesdb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/hussam/SFDS project/Hussam-moviesdb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/hussam/SFDS project/Hussam-moviesdb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/hussam/SFDS project/Hussam-moviesdb/src/components/movies.jsx\";\nimport React, { Component } from \"react\";\nimport Pagination from \"./pagination\";\nimport Movie from \"./movie\";\nimport { getPopular } from \"../services/moviesService\";\nimport { beginTheBar, endTheBar } from \"../services/loadingBarService\";\nimport queryString from \"query-string\";\n\nvar Movies = /*#__PURE__*/function (_Component) {\n  _inherits(Movies, _Component);\n\n  function Movies() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Movies);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Movies)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      movies: [],\n      rawData: [],\n      currentPage: 1,\n      layoutMode: \"grid\"\n    };\n\n    _this.getHeaderQuery = function () {\n      return queryString.parse(_this.props.location.search);\n    };\n\n    _this.pushToHistory = function (page, layout) {\n      _this.props.history.push(\"/movies?&page=\".concat(page, \"&layout=\").concat(layout));\n    };\n\n    _this.handleLayoutChange = function (mode) {\n      _this.setState({\n        layoutMode: mode\n      }, function () {\n        _this.pushToHistory(_this.state.currentPage, _this.state.layoutMode);\n      });\n    };\n\n    _this.handlePageChange = function (page) {\n      beginTheBar();\n\n      _this.setState({\n        currentPage: page\n      }, function () {\n        getPopular(_this.state.currentPage).then(function (movies) {\n          _this.setState({\n            movies: movies.results,\n            rawData: movies\n          }, function () {\n            endTheBar();\n\n            _this.pushToHistory(_this.state.currentPage, _this.state.layoutMode);\n          });\n        });\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Movies, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      beginTheBar();\n      var page = this.getHeaderQuery().page || this.state.currentPage;\n      var layout = this.getHeaderQuery().layout || this.state.layoutMode;\n      this.props.history.push(\"/movies?&page=\".concat(page, \"&layout=\").concat(layout));\n\n      if (layout !== this.state.layoutMode) {\n        this.setState({\n          layoutMode: layout\n        });\n      }\n\n      if (page !== this.state.currentPage) {\n        this.setState({\n          currentPage: page\n        });\n      }\n\n      getPopular(this.state.currentPage).then(function (movies) {\n        _this2.setState({\n          movies: movies.results,\n          rawData: movies\n        }, function () {\n          endTheBar();\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var movies = this.state.movies;\n      var _this$state$rawData = this.state.rawData,\n          totalPages = _this$state$rawData.total_pages,\n          currentPage = _this$state$rawData.page;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        className: \"movies-main-header display-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 9\n        }\n      }, \"Popular\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"float-right\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(\"ul\", {\n        className: \"row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 9\n        }\n      }, movies.map(function (m) {\n        return /*#__PURE__*/React.createElement(Movie, {\n          key: m.id,\n          movie: m,\n          type: _this3.state.layoutMode,\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 13\n          }\n        });\n      })), /*#__PURE__*/React.createElement(Pagination, {\n        pageCount: totalPages || 1,\n        currentPage: currentPage,\n        onPageChange: this.handlePageChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 9\n        }\n      }));\n    }\n  }]);\n\n  return Movies;\n}(Component);\n\nexport default Movies;","map":{"version":3,"sources":["/Users/hussam/SFDS project/Hussam-moviesdb/src/components/movies.jsx"],"names":["React","Component","Pagination","Movie","getPopular","beginTheBar","endTheBar","queryString","Movies","state","movies","rawData","currentPage","layoutMode","getHeaderQuery","parse","props","location","search","pushToHistory","page","layout","history","push","handleLayoutChange","mode","setState","handlePageChange","then","results","totalPages","total_pages","map","m","id"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,SAASC,UAAT,QAA2B,2BAA3B;AACA,SAASC,WAAT,EAAsBC,SAAtB,QAAuC,+BAAvC;AACA,OAAOC,WAAP,MAAwB,cAAxB;;IAEMC,M;;;;;;;;;;;;;;;UACJC,K,GAAQ;AACNC,MAAAA,MAAM,EAAE,EADF;AAENC,MAAAA,OAAO,EAAE,EAFH;AAGNC,MAAAA,WAAW,EAAE,CAHP;AAINC,MAAAA,UAAU,EAAE;AAJN,K;;UAORC,c,GAAiB;AAAA,aAAMP,WAAW,CAACQ,KAAZ,CAAkB,MAAKC,KAAL,CAAWC,QAAX,CAAoBC,MAAtC,CAAN;AAAA,K;;UAqBjBC,a,GAAgB,UAACC,IAAD,EAAOC,MAAP,EAAkB;AAChC,YAAKL,KAAL,CAAWM,OAAX,CAAmBC,IAAnB,yBAAyCH,IAAzC,qBAAwDC,MAAxD;AACD,K;;UAEDG,kB,GAAqB,UAAAC,IAAI,EAAI;AAC3B,YAAKC,QAAL,CAAc;AAAEb,QAAAA,UAAU,EAAEY;AAAd,OAAd,EAAoC,YAAM;AACxC,cAAKN,aAAL,CAAmB,MAAKV,KAAL,CAAWG,WAA9B,EAA2C,MAAKH,KAAL,CAAWI,UAAtD;AACD,OAFD;AAGD,K;;UAEDc,gB,GAAmB,UAAAP,IAAI,EAAI;AACzBf,MAAAA,WAAW;;AACX,YAAKqB,QAAL,CAAc;AAAEd,QAAAA,WAAW,EAAEQ;AAAf,OAAd,EAAqC,YAAM;AACzChB,QAAAA,UAAU,CAAC,MAAKK,KAAL,CAAWG,WAAZ,CAAV,CAAmCgB,IAAnC,CAAwC,UAAAlB,MAAM,EAAI;AAChD,gBAAKgB,QAAL,CAAc;AAAEhB,YAAAA,MAAM,EAAEA,MAAM,CAACmB,OAAjB;AAA0BlB,YAAAA,OAAO,EAAED;AAAnC,WAAd,EAA2D,YAAM;AAC/DJ,YAAAA,SAAS;;AACT,kBAAKa,aAAL,CAAmB,MAAKV,KAAL,CAAWG,WAA9B,EAA2C,MAAKH,KAAL,CAAWI,UAAtD;AACD,WAHD;AAID,SALD;AAMD,OAPD;AAQD,K;;;;;;;wCAvCmB;AAAA;;AAClBR,MAAAA,WAAW;AACX,UAAIe,IAAI,GAAG,KAAKN,cAAL,GAAsBM,IAAtB,IAA8B,KAAKX,KAAL,CAAWG,WAApD;AACA,UAAIS,MAAM,GAAG,KAAKP,cAAL,GAAsBO,MAAtB,IAAgC,KAAKZ,KAAL,CAAWI,UAAxD;AACA,WAAKG,KAAL,CAAWM,OAAX,CAAmBC,IAAnB,yBAAyCH,IAAzC,qBAAwDC,MAAxD;;AAEA,UAAIA,MAAM,KAAK,KAAKZ,KAAL,CAAWI,UAA1B,EAAsC;AACpC,aAAKa,QAAL,CAAc;AAAEb,UAAAA,UAAU,EAAEQ;AAAd,SAAd;AACD;;AACD,UAAID,IAAI,KAAK,KAAKX,KAAL,CAAWG,WAAxB,EAAqC;AACnC,aAAKc,QAAL,CAAc;AAAEd,UAAAA,WAAW,EAAEQ;AAAf,SAAd;AACD;;AACDhB,MAAAA,UAAU,CAAC,KAAKK,KAAL,CAAWG,WAAZ,CAAV,CAAmCgB,IAAnC,CAAwC,UAAAlB,MAAM,EAAI;AAChD,QAAA,MAAI,CAACgB,QAAL,CAAc;AAAEhB,UAAAA,MAAM,EAAEA,MAAM,CAACmB,OAAjB;AAA0BlB,UAAAA,OAAO,EAAED;AAAnC,SAAd,EAA2D,YAAM;AAC/DJ,UAAAA,SAAS;AACV,SAFD;AAGD,OAJD;AAKD;;;6BAwBQ;AAAA;;AAAA,UACCI,MADD,GACY,KAAKD,KADjB,CACCC,MADD;AAAA,gCAEgD,KAAKD,KAAL,CAAWE,OAF3D;AAAA,UAEcmB,UAFd,uBAECC,WAFD;AAAA,UAEgCnB,WAFhC,uBAE0BQ,IAF1B;AAGP,0BACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAI,QAAA,SAAS,EAAC,8BAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,eAEE;AAAK,QAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,eAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJF,eAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QALF,eAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QANF,eAOE;AAAI,QAAA,SAAS,EAAC,KAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGV,MAAM,CAACsB,GAAP,CAAW,UAAAC,CAAC;AAAA,4BACX,oBAAC,KAAD;AAAO,UAAA,GAAG,EAAEA,CAAC,CAACC,EAAd;AAAkB,UAAA,KAAK,EAAED,CAAzB;AAA4B,UAAA,IAAI,EAAE,MAAI,CAACxB,KAAL,CAAWI,UAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADW;AAAA,OAAZ,CADH,CAPF,eAYE,oBAAC,UAAD;AACE,QAAA,SAAS,EAAEiB,UAAU,IAAI,CAD3B;AAEE,QAAA,WAAW,EAAElB,WAFf;AAGE,QAAA,YAAY,EAAE,KAAKe,gBAHrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAZF,CADF;AAoBD;;;;EA1EkB1B,S;;AA6ErB,eAAeO,MAAf","sourcesContent":["import React, { Component } from \"react\";\nimport Pagination from \"./pagination\";\nimport Movie from \"./movie\";\nimport { getPopular } from \"../services/moviesService\";\nimport { beginTheBar, endTheBar } from \"../services/loadingBarService\";\nimport queryString from \"query-string\";\n\nclass Movies extends Component {\n  state = {\n    movies: [],\n    rawData: [],\n    currentPage: 1,\n    layoutMode: \"grid\"\n  };\n\n  getHeaderQuery = () => queryString.parse(this.props.location.search);\n\n  componentDidMount() {\n    beginTheBar();\n    let page = this.getHeaderQuery().page || this.state.currentPage;\n    let layout = this.getHeaderQuery().layout || this.state.layoutMode;\n    this.props.history.push(`/movies?&page=${page}&layout=${layout}`);\n\n    if (layout !== this.state.layoutMode) {\n      this.setState({ layoutMode: layout });\n    }\n    if (page !== this.state.currentPage) {\n      this.setState({ currentPage: page });\n    }\n    getPopular(this.state.currentPage).then(movies => {\n      this.setState({ movies: movies.results, rawData: movies }, () => {\n        endTheBar();\n      });\n    });\n  }\n\n  pushToHistory = (page, layout) => {\n    this.props.history.push(`/movies?&page=${page}&layout=${layout}`);\n  };\n\n  handleLayoutChange = mode => {\n    this.setState({ layoutMode: mode }, () => {\n      this.pushToHistory(this.state.currentPage, this.state.layoutMode);\n    });\n  };\n\n  handlePageChange = page => {\n    beginTheBar();\n    this.setState({ currentPage: page }, () => {\n      getPopular(this.state.currentPage).then(movies => {\n        this.setState({ movies: movies.results, rawData: movies }, () => {\n          endTheBar();\n          this.pushToHistory(this.state.currentPage, this.state.layoutMode);\n        });\n      });\n    });\n  };\n\n  render() {\n    const { movies } = this.state;\n    const { total_pages: totalPages, page: currentPage } = this.state.rawData;\n    return (\n      <div>\n        <h1 className=\"movies-main-header display-4\">Popular</h1>\n        <div className=\"float-right\"></div>\n\n        <br />\n        <br />\n        <br />\n        <ul className=\"row\">\n          {movies.map(m => (\n            <Movie key={m.id} movie={m} type={this.state.layoutMode} />\n          ))}\n        </ul>\n        <Pagination\n          pageCount={totalPages || 1}\n          currentPage={currentPage}\n          onPageChange={this.handlePageChange}\n        />\n      </div>\n    );\n  }\n}\n\nexport default Movies;\n"]},"metadata":{},"sourceType":"module"}