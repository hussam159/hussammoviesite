{"ast":null,"code":"import _classCallCheck from \"/Users/hussam/SFDS project/react-movies-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/hussam/SFDS project/react-movies-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/hussam/SFDS project/react-movies-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/hussam/SFDS project/react-movies-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/hussam/SFDS project/react-movies-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/hussam/SFDS project/react-movies-master/src/components/topRated.jsx\";\nimport React, { Component } from \"react\";\nimport Movie from \"./movie\";\nimport Pagination from \"./pagination\";\nimport { getTopRated } from \"../services/moviesService\";\nimport { beginTheBar, endTheBar } from \"../services/loadingBarService\";\nimport ListOrGrid from \"./listOrGrid\";\nimport queryString from \"query-string\";\n\nvar TopRated = /*#__PURE__*/function (_Component) {\n  _inherits(TopRated, _Component);\n\n  function TopRated() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, TopRated);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(TopRated)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      movies: [],\n      rawData: [],\n      currentPage: 1,\n      layoutMode: 'grid'\n    };\n\n    _this.getHeaderQuery = function () {\n      return queryString.parse(_this.props.location.search);\n    };\n\n    _this.handlePageChange = function (page) {\n      beginTheBar();\n\n      _this.setState({\n        currentPage: page\n      }, function () {\n        getTopRated(_this.state.currentPage).then(function (movies) {\n          _this.setState({\n            movies: movies.results,\n            rawData: movies\n          }, function () {\n            endTheBar();\n          });\n        });\n      });\n    };\n\n    _this.pushToHistory = function (page, layout) {\n      _this.props.history.push(\"/top-rated?&page=\".concat(page, \"&layout=\").concat(layout));\n    };\n\n    _this.handleLayoutChange = function (mode) {\n      _this.setState({\n        layoutMode: mode\n      }, function () {\n        _this.pushToHistory(_this.state.currentPage, _this.state.layoutMode);\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(TopRated, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      beginTheBar();\n      var page = this.getHeaderQuery().page || this.state.currentPage;\n      var layout = this.getHeaderQuery().layout || this.state.layoutMode;\n      this.props.history.push(\"/top-rated?&page=\".concat(page, \"&layout=\").concat(layout));\n\n      if (layout !== this.state.layoutMode) {\n        this.setState({\n          layoutMode: layout\n        });\n      }\n\n      if (page !== this.state.currentPage) {\n        this.setState({\n          currentPage: page\n        });\n      }\n\n      beginTheBar();\n      getTopRated(this.state.currentPage).then(function (movies) {\n        _this2.setState({\n          movies: movies.results,\n          rawData: movies\n        }, function () {\n          endTheBar();\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var movies = this.state.movies;\n      var _this$state$rawData = this.state.rawData,\n          totalPages = _this$state$rawData.total_pages,\n          currentPage = _this$state$rawData.page;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        className: \"movies-main-header display-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 9\n        }\n      }, \"Top Rated\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"float-right\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(ListOrGrid, {\n        active: this.state.layoutMode,\n        changeLayout: function changeLayout(e) {\n          return _this3.handleLayoutChange(e);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }\n      })), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(\"ul\", {\n        className: \"row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 9\n        }\n      }, movies.map(function (m) {\n        return /*#__PURE__*/React.createElement(Movie, {\n          key: m.id,\n          movie: m,\n          type: _this3.state.layoutMode,\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 13\n          }\n        });\n      })), /*#__PURE__*/React.createElement(Pagination, {\n        pageCount: totalPages || 1,\n        currentPage: currentPage,\n        onPageChange: this.handlePageChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 9\n        }\n      }));\n    }\n  }]);\n\n  return TopRated;\n}(Component);\n\nexport default TopRated;","map":{"version":3,"sources":["/Users/hussam/SFDS project/react-movies-master/src/components/topRated.jsx"],"names":["React","Component","Movie","Pagination","getTopRated","beginTheBar","endTheBar","ListOrGrid","queryString","TopRated","state","movies","rawData","currentPage","layoutMode","getHeaderQuery","parse","props","location","search","handlePageChange","page","setState","then","results","pushToHistory","layout","history","push","handleLayoutChange","mode","totalPages","total_pages","e","map","m","id"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,SAASC,WAAT,QAA4B,2BAA5B;AACA,SAASC,WAAT,EAAsBC,SAAtB,QAAuC,+BAAvC;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,OAAOC,WAAP,MAAwB,cAAxB;;IAEMC,Q;;;;;;;;;;;;;;;UACJC,K,GAAQ;AACNC,MAAAA,MAAM,EAAE,EADF;AAENC,MAAAA,OAAO,EAAE,EAFH;AAGNC,MAAAA,WAAW,EAAE,CAHP;AAINC,MAAAA,UAAU,EAAE;AAJN,K;;UAORC,c,GAAiB;AAAA,aAAMP,WAAW,CAACQ,KAAZ,CAAkB,MAAKC,KAAL,CAAWC,QAAX,CAAoBC,MAAtC,CAAN;AAAA,K;;UAyBjBC,gB,GAAmB,UAAAC,IAAI,EAAI;AACzBhB,MAAAA,WAAW;;AACX,YAAKiB,QAAL,CAAc;AAAET,QAAAA,WAAW,EAAEQ;AAAf,OAAd,EAAqC,YAAM;AACzCjB,QAAAA,WAAW,CAAC,MAAKM,KAAL,CAAWG,WAAZ,CAAX,CAAoCU,IAApC,CAAyC,UAAAZ,MAAM,EAAI;AACjD,gBAAKW,QAAL,CAAc;AAAEX,YAAAA,MAAM,EAAEA,MAAM,CAACa,OAAjB;AAA0BZ,YAAAA,OAAO,EAAED;AAAnC,WAAd,EAA2D,YAAM;AAC/DL,YAAAA,SAAS;AACV,WAFD;AAGD,SAJD;AAKD,OAND;AAOD,K;;UAEDmB,a,GAAgB,UAACJ,IAAD,EAAOK,MAAP,EAAkB;AAChC,YAAKT,KAAL,CAAWU,OAAX,CAAmBC,IAAnB,4BAA4CP,IAA5C,qBAA2DK,MAA3D;AACD,K;;UAEDG,kB,GAAqB,UAAAC,IAAI,EAAI;AAC3B,YAAKR,QAAL,CAAc;AAAER,QAAAA,UAAU,EAAEgB;AAAd,OAAd,EAAoC,YAAM;AACxC,cAAKL,aAAL,CAAmB,MAAKf,KAAL,CAAWG,WAA9B,EAA2C,MAAKH,KAAL,CAAWI,UAAtD;AACD,OAFD;AAGD,K;;;;;;;wCAzCmB;AAAA;;AAClBT,MAAAA,WAAW;AACX,UAAIgB,IAAI,GAAG,KAAKN,cAAL,GAAsBM,IAAtB,IAA8B,KAAKX,KAAL,CAAWG,WAApD;AACA,UAAIa,MAAM,GAAG,KAAKX,cAAL,GAAsBW,MAAtB,IAAgC,KAAKhB,KAAL,CAAWI,UAAxD;AACA,WAAKG,KAAL,CAAWU,OAAX,CAAmBC,IAAnB,4BAA4CP,IAA5C,qBAA2DK,MAA3D;;AAEA,UAAGA,MAAM,KAAK,KAAKhB,KAAL,CAAWI,UAAzB,EAAqC;AACnC,aAAKQ,QAAL,CAAc;AAACR,UAAAA,UAAU,EAAEY;AAAb,SAAd;AACD;;AACD,UAAGL,IAAI,KAAK,KAAKX,KAAL,CAAWG,WAAvB,EAAoC;AAClC,aAAKS,QAAL,CAAc;AAACT,UAAAA,WAAW,EAAEQ;AAAd,SAAd;AAED;;AACDhB,MAAAA,WAAW;AAEXD,MAAAA,WAAW,CAAC,KAAKM,KAAL,CAAWG,WAAZ,CAAX,CAAoCU,IAApC,CAAyC,UAAAZ,MAAM,EAAI;AACjD,QAAA,MAAI,CAACW,QAAL,CAAc;AAAEX,UAAAA,MAAM,EAAEA,MAAM,CAACa,OAAjB;AAA0BZ,UAAAA,OAAO,EAAED;AAAnC,SAAd,EAA2D,YAAM;AAC/DL,UAAAA,SAAS;AACV,SAFD;AAGD,OAJD;AAKD;;;6BAuBQ;AAAA;;AAAA,UACCK,MADD,GACY,KAAKD,KADjB,CACCC,MADD;AAAA,gCAEgD,KAAKD,KAAL,CAAWE,OAF3D;AAAA,UAEcmB,UAFd,uBAECC,WAFD;AAAA,UAEgCnB,WAFhC,uBAE0BQ,IAF1B;AAIP,0BACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAI,QAAA,SAAS,EAAC,8BAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADF,eAEE;AAAK,QAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,UAAD;AACE,QAAA,MAAM,EAAE,KAAKX,KAAL,CAAWI,UADrB;AAEE,QAAA,YAAY,EAAE,sBAAAmB,CAAC;AAAA,iBAAI,MAAI,CAACJ,kBAAL,CAAwBI,CAAxB,CAAJ;AAAA,SAFjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CAFF,eAQE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QARF,eASE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QATF,eAUE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAVF,eAWE;AAAI,QAAA,SAAS,EAAC,KAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGtB,MAAM,CAACuB,GAAP,CAAW,UAAAC,CAAC;AAAA,4BACX,oBAAC,KAAD;AAAO,UAAA,GAAG,EAAEA,CAAC,CAACC,EAAd;AAAkB,UAAA,KAAK,EAAED,CAAzB;AAA4B,UAAA,IAAI,EAAE,MAAI,CAACzB,KAAL,CAAWI,UAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADW;AAAA,OAAZ,CADH,CAXF,eAgBE,oBAAC,UAAD;AACE,QAAA,SAAS,EAAEiB,UAAU,IAAI,CAD3B;AAEE,QAAA,WAAW,EAAElB,WAFf;AAGE,QAAA,YAAY,EAAE,KAAKO,gBAHrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAhBF,CADF;AAwBD;;;;EAlFoBnB,S;;AAqFvB,eAAeQ,QAAf","sourcesContent":["import React, { Component } from \"react\";\nimport Movie from \"./movie\";\nimport Pagination from \"./pagination\";\nimport { getTopRated } from \"../services/moviesService\";\nimport { beginTheBar, endTheBar } from \"../services/loadingBarService\";\nimport ListOrGrid from \"./listOrGrid\";\nimport queryString from \"query-string\";\n\nclass TopRated extends Component {\n  state = {\n    movies: [],\n    rawData: [],\n    currentPage: 1,\n    layoutMode: 'grid'\n  };\n\n  getHeaderQuery = () => queryString.parse(this.props.location.search)\n\n\n  componentDidMount() {\n    beginTheBar();\n    let page = this.getHeaderQuery().page || this.state.currentPage\n    let layout = this.getHeaderQuery().layout || this.state.layoutMode\n    this.props.history.push(`/top-rated?&page=${page}&layout=${layout}`);\n\n    if(layout !== this.state.layoutMode) {\n      this.setState({layoutMode: layout})\n    }\n    if(page !== this.state.currentPage) {\n      this.setState({currentPage: page})\n\n    }\n    beginTheBar();\n\n    getTopRated(this.state.currentPage).then(movies => {\n      this.setState({ movies: movies.results, rawData: movies }, () => {\n        endTheBar();\n      });\n    });\n  }\n\n  handlePageChange = page => {\n    beginTheBar();\n    this.setState({ currentPage: page }, () => {\n      getTopRated(this.state.currentPage).then(movies => {\n        this.setState({ movies: movies.results, rawData: movies }, () => {\n          endTheBar();\n        });\n      });\n    });\n  };\n\n  pushToHistory = (page, layout) => {\n    this.props.history.push(`/top-rated?&page=${page}&layout=${layout}`);\n  };\n\n  handleLayoutChange = mode => {\n    this.setState({ layoutMode: mode }, () => {\n      this.pushToHistory(this.state.currentPage, this.state.layoutMode);\n    });\n  };\n\n  render() {\n    const { movies } = this.state;\n    const { total_pages: totalPages, page: currentPage } = this.state.rawData;\n\n    return (\n      <div>\n        <h1 className=\"movies-main-header display-4\">Top Rated</h1>\n        <div className=\"float-right\">\n          <ListOrGrid\n            active={this.state.layoutMode}\n            changeLayout={e => this.handleLayoutChange(e)}\n          />\n        </div>\n        <br />\n        <br />\n        <br />\n        <ul className=\"row\">\n          {movies.map(m => (\n            <Movie key={m.id} movie={m} type={this.state.layoutMode} />\n          ))}\n        </ul>\n        <Pagination\n          pageCount={totalPages || 1}\n          currentPage={currentPage}\n          onPageChange={this.handlePageChange}\n        />\n      </div>\n    );\n  }\n}\n\nexport default TopRated;\n"]},"metadata":{},"sourceType":"module"}