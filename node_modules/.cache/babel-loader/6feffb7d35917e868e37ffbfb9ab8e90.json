{"ast":null,"code":"import _classCallCheck from \"/Users/hussam/SFDS project/react-movies-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/hussam/SFDS project/react-movies-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/hussam/SFDS project/react-movies-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/hussam/SFDS project/react-movies-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/hussam/SFDS project/react-movies-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/hussam/SFDS project/react-movies-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/hussam/SFDS project/react-movies-master/src/components/searchMovies.jsx\";\nimport React, { Component } from \"react\";\nimport { searchMovie } from \"../services/moviesService\";\nimport Movie from \"./movie\";\nimport Serie from \"./serie\";\nimport Pagination from \"./pagination\";\nimport ListOrGrid from \"./listOrGrid\";\nimport queryString from \"query-string\";\nimport { beginTheBar, endTheBar } from \"../services/loadingBarService\";\nimport { searchSeries } from \"../services/seriesService\";\n\nvar searchMovies = /*#__PURE__*/function (_Component) {\n  _inherits(searchMovies, _Component);\n\n  function searchMovies(props) {\n    var _this;\n\n    _classCallCheck(this, searchMovies);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(searchMovies).call(this, props));\n    _this.state = {\n      movies: [],\n      rawData: [],\n      searchMovieName: \"\",\n      currentPage: 1,\n      submitedMovieName: \"\",\n      layoutMode: \"grid\",\n      searchType: \"Movies\"\n    };\n\n    _this.search = function (_callback) {\n      var data = _this.getHeaderQuery().q;\n\n      var page = _this.state.currentPage;\n      console.log(_this.state.searchType);\n\n      if (_this.state.searchType === \"Movies\") {\n        console.log(\"searching movies\");\n        searchMovie(data, page).then(function (result) {\n          _this.setState({\n            movies: result.results,\n            rawData: result,\n            currentPage: 1,\n            submitedMovieName: data\n          }, function () {\n            _callback();\n          });\n        });\n      } else {\n        console.log(\"searching series\");\n        searchSeries(data, page).then(function (result) {\n          _this.setState({\n            movies: result.results,\n            rawData: result,\n            currentPage: 1,\n            submitedMovieName: data\n          }, function () {\n            _callback();\n          });\n        });\n      }\n    };\n\n    _this.getHeaderQuery = function () {\n      return queryString.parse(_this.props.location.search);\n    };\n\n    _this.handleMovieTitleInput = function (e) {\n      _this.setState({\n        searchMovieName: e.target.value\n      });\n    };\n\n    _this.seriesSearch = function (e) {\n      _this.setState({\n        searchType: e.target.value\n      });\n    };\n\n    _this.movieSearch = function (e) {\n      _this.setState({\n        searchType: e.target.value\n      });\n    };\n\n    _this.handleLayoutChange = function (mode) {\n      _this.setState({\n        layoutMode: mode\n      }, function () {\n        _this.pushToHistory(_this.state.submitedMovieName, _this.state.currentPage, _this.state.layoutMode);\n      });\n    };\n\n    _this.pushToHistory = function (query, page, layout) {\n      _this.props.history.push(\"/search?q=\".concat(encodeURIComponent(query), \"&page=\").concat(page, \"&layout=\").concat(layout));\n    };\n\n    _this.handleFormSubmit = function (e) {\n      e.preventDefault();\n      if (_this.state.searchMovieName === undefined) return;\n      if (_this.state.searchMovieName === \"\") return;\n      beginTheBar();\n\n      _this.pushToHistory(_this.state.searchMovieName, _this.state.currentPage, _this.state.layoutMode);\n\n      _this.setState({\n        submitedMovieName: _this.state.searchMovieName\n      }, function () {\n        _this.search(function () {\n          return endTheBar();\n        });\n      });\n    };\n\n    _this.handlePageChange = function (page) {\n      beginTheBar();\n\n      _this.setState({\n        currentPage: page\n      }, function () {\n        _this.pushToHistory(_this.state.submitedMovieName, _this.state.currentPage, _this.state.layoutMode);\n\n        _this.search(function () {\n          endTheBar();\n        });\n      });\n    };\n\n    _this.renderMoviesPosterList = function (movies) {\n      return /*#__PURE__*/React.createElement(\"ul\", {\n        className: \"row\",\n        __self: _assertThisInitialized(_assertThisInitialized(_this)),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 7\n        }\n      }, movies.map(function (m) {\n        return _this.state.searchType === \"Movies\" ? /*#__PURE__*/React.createElement(Movie, {\n          key: m.id,\n          movie: m,\n          type: _this.state.layoutMode,\n          __self: _assertThisInitialized(_assertThisInitialized(_this)),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 13\n          }\n        }) : /*#__PURE__*/React.createElement(Serie, {\n          key: m.id,\n          movie: m,\n          type: _this.state.layoutMode,\n          __self: _assertThisInitialized(_assertThisInitialized(_this)),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 13\n          }\n        });\n      }));\n    };\n\n    return _this;\n  }\n\n  _createClass(searchMovies, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      beginTheBar();\n      var page = this.getHeaderQuery().page || this.state.currentPage;\n      var query = this.getHeaderQuery().q || this.state.searchMovieName;\n      var layout = this.getHeaderQuery().layout || this.state.layoutMode;\n\n      if (query !== \"\") {\n        if (layout !== this.state.layoutMode) {\n          this.setState({\n            layoutMode: layout\n          });\n        }\n\n        if (page !== this.state.currentPage) {\n          this.setState({\n            currentPage: page\n          });\n        }\n      }\n\n      this.pushToHistory(query, page, layout);\n      this.setState({\n        currentPage: page,\n        layoutMode: layout\n      }, function () {\n        _this2.search(function () {\n          endTheBar();\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$state$rawData = this.state.rawData,\n          totalPages = _this$state$rawData.total_pages,\n          currentPage = _this$state$rawData.page,\n          totalResults = _this$state$rawData.total_results;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"inline-form\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"form\", {\n        className: \"form-inline\",\n        onSubmit: this.handleFormSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group mx-sm-3 mb-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        id: \"movieTitle\",\n        autoFocus: true,\n        placeholder: \"Movie Title\",\n        value: this.state.searchMovieName,\n        onChange: this.handleMovieTitleInput,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 15\n        }\n      })), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-primary mb-2 ml-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 13\n        }\n      }, \"Search\")), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(ListOrGrid, {\n        active: this.state.layoutMode,\n        changeLayout: function changeLayout(e) {\n          return _this3.handleLayoutChange(e);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 11\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group mx-sm-3 mb-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-check\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-check-input\",\n        type: \"radio\",\n        name: \"exampleRadios\",\n        id: \"exampleRadios1\",\n        value: \"Movies\",\n        onClick: this.movieSearch,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"label\", {\n        className: \"form-check-label\",\n        for: \"exampleRadios1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 13\n        }\n      }, \"Movies\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-check\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-check-input\",\n        type: \"radio\",\n        name: \"exampleRadios\",\n        id: \"exampleRadios2\",\n        value: \"Series\",\n        onClick: this.seriesSearch,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"label\", {\n        className: \"form-check-label\",\n        for: \"exampleRadios2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 13\n        }\n      }, \"Series\"))), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 9\n        }\n      }), this.state.movies === undefined || this.state.movies.length === 0 ? /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 11\n        }\n      }, \"No Results\") : /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 13\n        }\n      }, \"Showing \", /*#__PURE__*/React.createElement(\"span\", {\n        className: \"font-weight-bold\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 23\n        }\n      }, totalResults), \" \", \"results for '\", this.state.submitedMovieName, \"'\"), this.renderMoviesPosterList(this.state.movies)), /*#__PURE__*/React.createElement(Pagination, {\n        pageCount: totalPages || 1,\n        currentPage: currentPage,\n        onPageChange: this.handlePageChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 9\n        }\n      }));\n    }\n  }]);\n\n  return searchMovies;\n}(Component);\n\nexport default searchMovies;","map":{"version":3,"sources":["/Users/hussam/SFDS project/react-movies-master/src/components/searchMovies.jsx"],"names":["React","Component","searchMovie","Movie","Serie","Pagination","ListOrGrid","queryString","beginTheBar","endTheBar","searchSeries","searchMovies","props","state","movies","rawData","searchMovieName","currentPage","submitedMovieName","layoutMode","searchType","search","_callback","data","getHeaderQuery","q","page","console","log","then","result","setState","results","parse","location","handleMovieTitleInput","e","target","value","seriesSearch","movieSearch","handleLayoutChange","mode","pushToHistory","query","layout","history","push","encodeURIComponent","handleFormSubmit","preventDefault","undefined","handlePageChange","renderMoviesPosterList","map","m","id","totalPages","total_pages","totalResults","total_results","length"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { searchMovie } from \"../services/moviesService\";\nimport Movie from \"./movie\";\nimport Serie from \"./serie\";\n\nimport Pagination from \"./pagination\";\nimport ListOrGrid from \"./listOrGrid\";\nimport queryString from \"query-string\";\nimport { beginTheBar, endTheBar } from \"../services/loadingBarService\";\nimport { searchSeries } from \"../services/seriesService\";\n\nclass searchMovies extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n  state = {\n    movies: [],\n    rawData: [],\n    searchMovieName: \"\",\n    currentPage: 1,\n    submitedMovieName: \"\",\n    layoutMode: \"grid\",\n    searchType: \"Movies\"\n  };\n\n  search = _callback => {\n    let data = this.getHeaderQuery().q;\n    let page = this.state.currentPage;\n\n    console.log(this.state.searchType);\n\n    if (this.state.searchType === \"Movies\") {\n      console.log(\"searching movies\");\n      searchMovie(data, page).then(result => {\n        this.setState(\n          {\n            movies: result.results,\n            rawData: result,\n            currentPage: 1,\n            submitedMovieName: data\n          },\n          () => {\n            _callback();\n          }\n        );\n      });\n    } else {\n      console.log(\"searching series\");\n\n      searchSeries(data, page).then(result => {\n        this.setState(\n          {\n            movies: result.results,\n            rawData: result,\n            currentPage: 1,\n            submitedMovieName: data\n          },\n          () => {\n            _callback();\n          }\n        );\n      });\n    }\n  };\n\n  getHeaderQuery = () => queryString.parse(this.props.location.search);\n\n  componentDidMount() {\n    beginTheBar();\n    let page = this.getHeaderQuery().page || this.state.currentPage;\n    let query = this.getHeaderQuery().q || this.state.searchMovieName;\n    let layout = this.getHeaderQuery().layout || this.state.layoutMode;\n    if (query !== \"\") {\n      if (layout !== this.state.layoutMode) {\n        this.setState({ layoutMode: layout });\n      }\n      if (page !== this.state.currentPage) {\n        this.setState({ currentPage: page });\n      }\n    }\n    this.pushToHistory(query, page, layout);\n\n    this.setState({ currentPage: page, layoutMode: layout }, () => {\n      this.search(() => {\n        endTheBar();\n      });\n    });\n  }\n\n  handleMovieTitleInput = e => {\n    this.setState({ searchMovieName: e.target.value });\n  };\n  seriesSearch = e => {\n    this.setState({ searchType: e.target.value });\n  };\n  movieSearch = e => {\n    this.setState({ searchType: e.target.value });\n  };\n\n  handleLayoutChange = mode => {\n    this.setState({ layoutMode: mode }, () => {\n      this.pushToHistory(\n        this.state.submitedMovieName,\n        this.state.currentPage,\n        this.state.layoutMode\n      );\n    });\n  };\n\n  pushToHistory = (query, page, layout) => {\n    this.props.history.push(\n      `/search?q=${encodeURIComponent(query)}&page=${page}&layout=${layout}`\n    );\n  };\n\n  handleFormSubmit = e => {\n    e.preventDefault();\n    if (this.state.searchMovieName === undefined) return;\n    if (this.state.searchMovieName === \"\") return;\n    beginTheBar();\n    this.pushToHistory(\n      this.state.searchMovieName,\n      this.state.currentPage,\n      this.state.layoutMode\n    );\n\n    this.setState({ submitedMovieName: this.state.searchMovieName }, () => {\n      this.search(() => endTheBar());\n    });\n  };\n\n  handlePageChange = page => {\n    beginTheBar();\n    this.setState({ currentPage: page }, () => {\n      this.pushToHistory(\n        this.state.submitedMovieName,\n        this.state.currentPage,\n        this.state.layoutMode\n      );\n      this.search(() => {\n        endTheBar();\n      });\n    });\n  };\n\n  renderMoviesPosterList = movies => {\n    return (\n      <ul className=\"row\">\n        {movies.map(m =>\n          this.state.searchType === \"Movies\" ? (\n            <Movie key={m.id} movie={m} type={this.state.layoutMode} />\n          ) : (\n            <Serie key={m.id} movie={m} type={this.state.layoutMode} />\n          )\n        )}\n      </ul>\n    );\n  };\n\n  render() {\n    const {\n      total_pages: totalPages,\n      page: currentPage,\n      total_results: totalResults\n    } = this.state.rawData;\n\n    return (\n      <div>\n        <br />\n        <div className=\"inline-form\">\n          <form className=\"form-inline\" onSubmit={this.handleFormSubmit}>\n            <div className=\"form-group mx-sm-3 mb-2\">\n              <input\n                type=\"text\"\n                className=\"form-control\"\n                id=\"movieTitle\"\n                autoFocus\n                placeholder=\"Movie Title\"\n                value={this.state.searchMovieName}\n                onChange={this.handleMovieTitleInput}\n              />\n            </div>\n\n            <button type=\"submit\" className=\"btn btn-primary mb-2 ml-2\">\n              Search\n            </button>\n          </form>\n          <br />\n\n          <ListOrGrid\n            active={this.state.layoutMode}\n            changeLayout={e => this.handleLayoutChange(e)}\n          />\n        </div>\n        <div className=\"form-group mx-sm-3 mb-2\">\n          <div className=\"form-check\">\n            <input\n              className=\"form-check-input\"\n              type=\"radio\"\n              name=\"exampleRadios\"\n              id=\"exampleRadios1\"\n              value=\"Movies\"\n              onClick={this.movieSearch}\n            />\n            <label className=\"form-check-label\" for=\"exampleRadios1\">\n              Movies\n            </label>\n          </div>\n          <div className=\"form-check\">\n            <input\n              className=\"form-check-input\"\n              type=\"radio\"\n              name=\"exampleRadios\"\n              id=\"exampleRadios2\"\n              value=\"Series\"\n              onClick={this.seriesSearch}\n            />\n            <label className=\"form-check-label\" for=\"exampleRadios2\">\n              Series\n            </label>\n          </div>\n        </div>\n        <br />\n\n        {this.state.movies === undefined || this.state.movies.length === 0 ? (\n          <p>No Results</p>\n        ) : (\n          <div>\n            <p>\n              Showing <span className=\"font-weight-bold\">{totalResults}</span>{\" \"}\n              results for '{this.state.submitedMovieName}'\n            </p>\n            {this.renderMoviesPosterList(this.state.movies)}\n          </div>\n        )}\n        <Pagination\n          pageCount={totalPages || 1}\n          currentPage={currentPage}\n          onPageChange={this.handlePageChange}\n        />\n      </div>\n    );\n  }\n}\n\nexport default searchMovies;\n"]},"metadata":{},"sourceType":"module"}